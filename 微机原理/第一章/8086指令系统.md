# 8086指令系统
## 指令
指令是未处理执行某种操作的命令，全部指令的集合，称为指令系统。
### 内容
* 执行什么操作
* 操作数在哪
* 操作结果位置
### 组成
* 操作码:操作的性质或方式
* 操作数:操作的对象
```
-----------------------------------------
|  操作码  |      操作数或操作数地址       |
-----------------------------------------
```
### 表示方式
#### 机器指令
10110000 00000001
#### 符号指令
```
操作助记符 操作数助记符
  MOV        AL, 1
```
### 指令的寻址方式
寻址方式用于确定指令洪操作数的储存位置或程序转移时的转移地址
#### 两种情况
* 与数据有关的寻址:操作数的寻址
* 与转移地址有关的寻址:指令的寻址
#### 基本概念
* 不同的指令系统都会规定一些寻址方式供编程时选用
* 寻址方式的选取会影响机器运行的速度和效率
* 由于编译器要为了通用性牺牲性能，所以时不时需要手动优化
### 操作数的类型
* 立即数操作数:操作数包含在指令当中(存在代码段中CS)
* 寄存器操作数:存放在CPU的内部寄存器中
* 存储器操作数:存放在存储器中(存在数据段DS/堆栈段SS/扩展数据段ES中)[最多，即使用汇编，也不要用寄存器操作数]
* IO操作数:存放在IO电路中
#### 偏移地址寻址
存储器操作数寻址:段地址<<4+偏移地址，一般来说，段地址是不变的，变的只是偏移地址
##### MOV
```
MOV DEST，SRC
MOV AL,10H
MOV BL,AL
MOV 10H,200H
```
##### 直接寻址
在指令中直接给出，与操作码放在一起
```
MOV AL,[2000H]
MOV AX,ES:[2000H]
```
##### 间接寻址
```
MOV AL,[SI]隐式(默认在DS里面)
MOV AL,DS:[SI]显式
MOV AL,ES:[SI]改变
```
##### 相对寻址
相对基址寻址:偏移地址=BX/BP+xxx
相对变址寻址:偏移地址=SI/DI+xxx
```
MOV AL,10H[BX]=MOV AL,[BX + 10H];BX是数组下标
MOV AX,1000H[DI]=MOV AX,[DI + 1000H]
MOV AL,[BX][SI]=MOV AL,[BX + SI] 基址变址寻址
MOV AL,[BP][DI]=MOV AL,[BP + DI]
MOV AL,20H[BX][SI]=MOV AL,[20H+BX+SI] 相对基址变址寻址
MOV AX,1000H[BP][DI]=MOV AL,[1000H+BP+DI]
```
默认的，BP在SS，其他都在DS；直接给变量名的，都是直接寻址
### IO端口寻址
使用专门的指令IN和OUT
#### 两种方式
##### 直接寻址
指令中给出IO端口地址
```
IN AL,20H
```
##### 间接寻址
寄存器只能用DX，由DX给出IO端口地址
```
OUT DX,AL
IN AX,DX
```
### 转移地址的寻址
#### 段内转移:CS不变
```
JMP disp:(IP) = (IP) + disp
JMP BX:(IP) = (BX)
```
#### 段间转移:CS变
```
JMP disp_seg:disp_EA;(CS)=disp_seg,IP=disp_EA
JMP mem16_seg:mem_EA;CS=mem_EA+2,IP=disp_EA
```
