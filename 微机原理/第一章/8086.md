# 8086
## 简介
* 16位处理器,20位地址线
* 封装:双列直插，40管脚
* 时钟频率:5MHz-10MHz
* 供电:单相5V
## 编程结构
两个部件，
### 执行单元EU
* 分析指令，执行指令
* 一个16位ALU(算术逻辑单元)
* 8个通用寄存器
> AX,BX,CX,DX;BP,SP,SI,DI

* 标识寄存器FLAGS
* EU控制系统
### 总线结构单元BIU
* 控制完成全部总线操作，取指令，读数据并写运算结果
* 20位地址加法器
* 4个16位段寄存器
>
CS:代码段寄存器:</br>
DS:数据段寄存器</br>
ES:扩展段寄存器</br>
SS:堆栈段寄存器

* 一个16为指令指针寄存器:IP(下一条指令的地址)
* 6字节的指令队列缓冲器
* 总线控制逻辑
### 指令流水(Pipeline)
实现多条指令重叠执行的重要技术，可有效提高总线传输效率和整个系统的工作效率
### BIU和EU的配合
功能独立，并行工作
* 当BIU有两个以上空字节时，BIU自动取指令，填充指令队列(Cache缓存指令队列)
* EU执行完一条指令，立即从BIU中取下一条指令
* EU在执行指令是，需要进行存储或IO访问时，向BIU发出总线访问请求，若BIU空闲，则立即进行总线访问
* EU在执行转移，调用及返回指令时，指令队列自动清除，BIU重新取值填充队列(预测技术)
### 寄存器
#### 4个通用数据寄存器
#### 16位指针寄存器
SP堆栈指针寄存器,BP基址寄存器
#### 16位变址寄存器
SI源变址寄存器，DI目的变址寄存器
#### 16位段寄存器
CS:代码段寄存器
DS:数据段寄存器
ES:扩展段寄存器
SS:堆栈段寄存器
##### 地址的分段
将内存每64K分为一段，每段的起始地址要能被16整除，低次为0</br>
先确定段地址(起始地址)，左移四位(补0)，再加上偏移量</br>
不同寄存器查不同的地方
#### FLAGS
TF单步操作，IF中断允许，DF方向标志
CF进位标识(无符号数，超范围)，OF溢出标志(有符号数，超范围)，PF(奇偶标志，低8位中1的个数为偶数时为1)，AF辅助进位标志(低4位向高4位进借位)，ZF零标志，SF符号标志(最高位)，
## 引脚定义
### 分时复用
### 地址锁存
将地址存下来
### 总线驱动
提高总线的负载能力，抗干扰能力
### 工作模式
最小模式:只有一个CPU
最大模式:加上协处理器
### 定义
* AD0-AD15,地址/数据，双向，三态
* A19/S6-A16/S3，地址/状态，输出三台
* ALE地址锁存信号
* DEN数据使能
* DT/R数据总线驱动
* Reset:除了CS为FFFF，其他都为0
* Ready：慢速储存器IO
## 总线的形成
* MN/MX接高电平，决定工作模式
* 8282*3进行地址锁存(使能一直有效)
* 8286*2数据收发器(使能受CPU控制)
* 8284时钟整形
## 总线操作时序
### 主要操作
储存器的读写，IO的读写，中断周期
### 三级时序
指令周期->总线周期->时钟周期</br>
* 指令周期:从取指令到执行完指令所需要的时间称为指令周期，指令周期是由一个或多个基本操作组成
* 总线周期:CPU对存储器或IO接口完成一次访问，称为CPU执行了一次总线操作，总线操作的周期称为总线周期
* 时钟脉冲的重复周期称为时钟周期，时钟周期的CPU的时间基准，由CPU的主频决定。
### 总线周期
* T1：地址周期
* T2：缓冲周期
* T3：数据周期
* T4：结束周期
* 等待周期Tw：当储存器或者IO比较慢，需要在T3和T4中插入一个或几个等待周期Tw，Tw以时钟周期为单位
* 空闲周期Ti：总线处于空闲状态，此时执行空闲周期Ti，Ti也以时钟周期为单位
### 最小模式下的引脚信号
* 操作对象
* 操作方式
* 传输内容
* 外围接口芯片的信号
* 适配信号
### 最小模式下的读
#### T1
M/IO有效，地址，BHE有效，ALE下降沿锁存，DT/R有效
#### T2
CPU撤销地址，数据线高阻，DEN(使能)有效，RD有效
#### T3
地址与RD一直有效，在T3状态结束时，CPU从数据总线上读取数据
#### T4
地址，数据，控制，都高阻
### 最小模式下的写
#### T1
DT/R为高，用DT去控制总线收发器发送CPU输出的数据到数据总线
#### T2

## 存储器和I/O组织
### 储存器
字节1，字数据2，双子数据4
### 储存顺序
大尾，高位字节存在低位地址；小尾，低位字节存在低位地址
### 储存器分段
每个存储段的起始位置(基址)，最后4位为0.偏移地址，段内内存相对于基址的偏移量。物理地址=段地址<<4+偏移地址。编程时一定是逻辑地址。
#### 专用区
00000-003ff
