# 8086
## 功能单元
* BIU：总线接口部件
* EU：执行部件
### BIU
* 控制完成全部总线操作，取指令，读数据和写运算结果
* 20位地址加法器
* 4个16位段寄存器
> CS,DS,ES,SS

* 16位指令指针寄存器：IP
* 6字节指令队列缓冲器
* 总线控制逻辑
### EU
* 执行部件：分析指令，执行指令
* 一个16为ALU(算术逻辑单元)
* 八个通用寄存器
> AX,BX,CX,DX,BP,SP,SI,DI

* 标志寄存器FLAGS
* EU控制系统
## 编程结构
指令流水：一种实现多条指令重叠执行的重要技术，可有效提高总线传输效率和整个系统的执行速度。
* 核心:分级，并行
### BIU和EU
* BIU与EU并行工作
* BIU预读取指令
* EU从BIU取指令
* EU需要总线时，向BIU请求，空闲则允许访问
* EU转移，调用，返回时，BIU重新读指令
## 寄存器
### 通用数据寄存器
* AX：累加器
* BX：基地址寄存器
* CX：计数寄存器
* DX：辅助累加器
* 可以拆分
### 指针/变址寄存器
* SP：堆栈指针寄存器
* BP：基址指针寄存器
* SI：源变址寄存器
* DI：目的变址寄存器
* 不可拆分
### 段寄存器
* CS：代码段寄存器
* DS：数据段寄存器
* ES：扩展段寄存器
* SS：堆栈段寄存器
* IP：指令指针寄存器
### FLAGS
#### 控制标志位
* TF:单步操作标志
* IF：中断允许标志
* DF：方向标志[DF=1，从高地址到低地址]
#### 标志寄存器
* CF：进位，最高位进借位
* OF：溢出，超出有符号数
* AF：辅助进位标志，低四位向高四位进借位
* ZF：零标志
* SF：最高位
* PF：奇偶标志，低8位中有偶个1
## 引脚
* 地址/数据
* /BHE：数据总线高八位有效
* ALE：Address Latch
* /DEN：Data Enable
* DT//R：总线控制器流向控制
* M//IO：访问控制
* /RD：读
* /WR：写
## 时序
### 总线操作
* 存储器读写
* IO读写
* 中断
### 周期
* 指令周期：从取指令到执行完指令所需要的时间
* 总线周期：CPU完成一次访问，即完成一次总线操作
* 时钟周期
### 基本总线周期
* T1：地址周期
* T2：缓冲周期
* T3：数据周期
* T4：结束周期
* Tw：等待周期
* Ti：空闲周期
### 最小模式读
1. T1<br/>
M//IO，地址输出，/BHE有效，ALE有效，DT//R有效<br/>
声明访问设备，地址，BHE也作为地址位，ALE准备锁存，总线驱动器准备读入(/R)
2. T2<br/>
撤地址，数据口输出/输入转换(高阻)，/DEN有效，/RD有效
3. T3<br/>
地址与/RD有效，结束时从总线上读数据
4. T4<br/>
地址，数据线高阻，控制信号高阻
5. Tw<br/>
在T3下降沿采READY的样，若无效，则插入Tw，继续采。直到采到高电平有效，下个周期即进入T4
### 最小模式写
1. T1<br/>
大部分和最小模式读相同，除了总线驱动器为DT
2. T2<br/>
撤地址，但不高阻，直接输出数据，且/WR有效，都持续到T4
3. T3<br/>
保持T2的结束态
4. T4<br/>
撤回数据和各种使能信号
## 存储与IO
### 存放方式与顺序
* 字节/字/双字：1/2/4个单元
* 存储顺序：大尾，高位字节存在低位地址地位；小尾，低位字节存在低位地址
### 存储器结构
将1M字节的空间分成两个512K的存储体
* 偶体连低八位总线
* 奇体连高八位总线
* BHE有效选中奇体，A0有效选中偶体
* 操作数为字时，低位在低地址单元，高位在高地址单元
* 规则存放:起始地址为偶地址，访问只需一个总线周期
* 非规则存放:起始地址为奇地址，访问需要两个周期
### IO组织
IO空间与储存器空间分开，使用端口进行访问
* 地址空间：0000H~FFFFH，65535个端口
* 数据传输：一个端口只有8位
