# 8255A
## 工作方式
### 方式0
* ABC可以设定为数据输入或输出，都是单向无条件传输。
* 输出锁存，输入缓冲，但不锁存
* 没有联络线
### 方式1
* AB作为数据口，单向输入/输出，C口作为应答线或用于数据传输
* AB都具有锁存能力
* 用于中断方式和程序查询方式下的数据传输
### 方式2
* A支持数据双向传输，IO分时复用，C口作为联络线或数据传输，B口工作在0或1
* 用于中断方式和程序查询方式下的数据传输
## 具体时序
### 方式1和方式2的C口用法
# 8253
* 三个独立16位计数通道
* 二进制/十进制(BCD码)计数
* 计数速率2MHz
* 每个通道有六种工作方式
## 初始化
* 先送控制字，再写计数初值
* 只写低八位，高八位为0，RW=01
* 只写高八位，低八位为0，RW=10
* 16位初值，先写低八位，再写高八位，RW=11
## 初值范围
* 二进制：1-65536(0001H-0000H)
* BCD：1-10000(0001H-0000H)
## 读写
* 只允许读计数值，不允许读控制字
* 读取过程：先向控制器写锁存命令，再读，所以一共有写命令字一次，计数器到输出电路读一次，输出电路到CPU再读一次。读完后，锁存自动结束
## 工作方式
### 初始化
先写控制字，再写计数值，写入后需要一个周期才被装入计数寄存器，之后进行减一计数
#### 装入方法
* 一次有效装入
* 自动重复装入
#### 启动方式
* 软件启动：初值写入后，开始计数（GATE有效）
* 硬件启动：门控信号上升沿启动计数过程
#### 方式0：计数器
* 写控制字，输出0，计数结束输出1
* 写入N但实际需要N+1个上升沿才会输出1
* 软件启动，一次装入
#### 方式1：可编程单稳态触发器
* 硬件启动，自动装入
* 写入控制字，out=1，gate上升沿，经过一个clk后out=0，计数结束out=1，等待gate上升沿
* 负脉冲宽度，N个CLK周期
* 计数过程中，GATE上升沿可再次触发
* 计数过程中写入初值，下次触发有效
#### 方式2：N分频器
* 软件启动，自动装入
* 计数值为1，out=0，其余时刻，out=1
* 每输入N个CLK，输出一个负脉冲
* GATE=0，暂停计数，out=1,GATE变为1，重新计数
* 计数中写入，下次计数有效
#### 方式3：方波发生器
* 软件启动，自动装填
* 写入时刻out=1，计数值小于N/2，out=0，其余时刻，out=1.
* Gate=0，暂停，Gate=1，恢复初值重新计数
* 写入新的初值，在后半周期（低电平）计数开始时有效
#### 方式4：软件触发选通
* 软件启动，一次装入
* 计数结束，保持一个clk的out=0，其余时刻，out=1
* 可随时写入新的初始值，经过一个CLK后，使用新数字计数
#### 方式5：硬件触发选通
* 硬件启动，自动装填
* 计数结束，保持一个clk的out=0，其余时刻，out=1
* 写入新初始值，下次触发有效
